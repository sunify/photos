import{S as q,i as B,s as D,e as P,c as I,q as L,g as d,j as H,m as p,n as b,d as y,r as W,u as R,a as U,b as X,f as E,v as _,k as v,w as k,x as C,y as Y,o as N,z as V,A as F,B as J,C as O,D as Q}from"./index.669fa2c9.js";/* empty css                        */const j=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,{window:Z}=j;function x(n){let e,o="Back",l,s;return{c(){e=P("a"),e.textContent=o,this.h()},l(r){e=I(r,"A",{href:!0,class:!0,["data-svelte-h"]:!0}),L(e)!=="svelte-1nn2gax"&&(e.textContent=o),this.h()},h(){d(e,"href","."),d(e,"class","back svelte-z80bok")},m(r,u){H(r,e,u),n[5](e),l||(s=[p(Z,"keyup",n[1]),p(e,"click",n[2])],l=!0)},p:b,i:b,o:b,d(r){r&&y(e),n[5](null),l=!1,W(s)}}}function S(n){window.history.back(),setTimeout(()=>{window.location=n},50)}function A(n){window.history.replaceState(null,"",`./${n}`),window.location.reload()}function $(n,e,o){let{prevPhotoId:l=null}=e,{nextPhotoId:s=null}=e,r;function u(a){a.key==="Escape"&&S("."),a.key==="ArrowLeft"&&l&&A(l),a.key==="ArrowRight"&&s&&A(s)}function f(a){a.preventDefault(),S(r.href)}function m(a){R[a?"unshift":"push"](()=>{r=a,o(0,r)})}return n.$$set=a=>{"prevPhotoId"in a&&o(3,l=a.prevPhotoId),"nextPhotoId"in a&&o(4,s=a.nextPhotoId)},[r,u,f,l,s,m]}class ee extends q{constructor(e){super(),B(this,e,$,x,D,{prevPhotoId:3,nextPhotoId:4})}}const{window:te}=j;function M(n){let e,o;return e=new ee({props:{prevPhotoId:n[1],nextPhotoId:n[2]}}),{c(){V(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,s){J(e,l,s),o=!0},p(l,s){const r={};s&2&&(r.prevPhotoId=l[1]),s&4&&(r.nextPhotoId=l[2]),e.$set(r)},i(l){o||(k(e.$$.fragment,l),o=!0)},o(l){C(e.$$.fragment,l),o=!1},d(l){O(e,l)}}}function ne(n){let e,o,l,s,r,u,f,m,a,h,g,w,t=!n[4]&&M(n);return{c(){e=P("div"),o=P("img"),r=U(),u=P("img"),m=U(),t&&t.c(),this.h()},l(i){e=I(i,"DIV",{class:!0});var c=X(e);o=I(c,"IMG",{class:!0,src:!0,alt:!0}),r=E(c),u=I(c,"IMG",{src:!0,class:!0,alt:!0}),m=E(c),t&&t.l(c),c.forEach(y),this.h()},h(){d(o,"class","photo svelte-c3ihsa"),_(o.src,l=n[3]?n[5]:`data:image/png;base64,${n[0].data.placeholder}`)||d(o,"src",l),d(o,"alt",s=n[0].data.title),_(u.src,f="data:image/png;base64,"+n[0].data.placeholder)||d(u,"src",f),d(u,"class","placeholder svelte-c3ihsa"),d(u,"alt","placeholder"),d(e,"class",a="preview "+(n[3]?"loaded":"")+" "+(n[4]?"full":"")+" svelte-c3ihsa")},m(i,c){H(i,e,c),v(e,o),v(e,r),v(e,u),v(e,m),t&&t.m(e,null),h=!0,g||(w=[p(te,"keyup",n[7]),p(o,"click",n[6]),p(o,"keyup",oe)],g=!0)},p(i,[c]){(!h||c&41&&!_(o.src,l=i[3]?i[5]:`data:image/png;base64,${i[0].data.placeholder}`))&&d(o,"src",l),(!h||c&1&&s!==(s=i[0].data.title))&&d(o,"alt",s),(!h||c&1&&!_(u.src,f="data:image/png;base64,"+i[0].data.placeholder))&&d(u,"src",f),i[4]?t&&(Q(),C(t,1,1,()=>{t=null}),Y()):t?(t.p(i,c),c&16&&k(t,1)):(t=M(i),t.c(),k(t,1),t.m(e,null)),(!h||c&24&&a!==(a="preview "+(i[3]?"loaded":"")+" "+(i[4]?"full":"")+" svelte-c3ihsa"))&&d(e,"class",a)},i(i){h||(k(t),h=!0)},o(i){C(t),h=!1},d(i){i&&y(e),t&&t.d(),g=!1,W(w)}}}function oe(){}function le(n){return new Promise(e=>{setTimeout(e,n)})}function ae(n,e,o){let l,{photo:s}=e,{prevPhotoId:r=null}=e,{nextPhotoId:u=null}=e,{baseUrl:f}=e,m=!1,a=!1;function h(t){if(!a){const{pageX:i,pageY:c}=t;setTimeout(()=>{const z=document.documentElement.scrollWidth-window.innerWidth,G=document.documentElement.scrollHeight-window.innerHeight,T=K=>Math.round(K*100)/100;window.scrollTo(z*T(i/window.innerWidth),G*T(c/window.innerHeight))})}o(4,a=!a)}function g(){return new Promise(t=>{const i=new Image;i.onload=()=>{t(!0)},i.src=l.href})}function w(t){t.key==="Escape"&&o(4,a=!1)}return N(()=>{Promise.all([g(),le(400)]).then(()=>{o(3,m=!0)})}),n.$$set=t=>{"photo"in t&&o(0,s=t.photo),"prevPhotoId"in t&&o(1,r=t.prevPhotoId),"nextPhotoId"in t&&o(2,u=t.nextPhotoId),"baseUrl"in t&&o(8,f=t.baseUrl)},n.$$.update=()=>{n.$$.dirty&257&&o(5,l=new URL(`../images/full/${s.id}.jpg`,f))},[s,r,u,m,a,l,h,w,f]}class re extends q{constructor(e){super(),B(this,e,ae,ne,D,{photo:0,prevPhotoId:1,nextPhotoId:2,baseUrl:8})}}export{re as default};
