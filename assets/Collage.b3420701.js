import{S as ie,i as oe,s as re,a as U,e as g,F as Z,f as x,c as m,b as R,d as y,g as v,j as F,m as L,n as q,D as P,G as O,H as $,k as _,I as J,r as ue,J as ee,K as ce,E as te}from"./index.69988667.js";const B=document.createElement("a");document.body.appendChild(B);B.style.display="none";function fe(t,e){return new Promise(l=>{t.toBlob(i=>{if(i){const d=URL.createObjectURL(i);B.href=d,B.download=`${e}.jpg`,B.click(),URL.revokeObjectURL(d),l(i)}},"image/jpeg")})}const pe={s:1e3,m:2e3,l:3e3};function se(t){return pe[t]}function de(t,e){return se(e)*(t/100)}function ae(t,{size:e,spacing:l},i){const o={items:[],w:0,h:0},u=t.map(a=>a.width/a.height),p=se(e),s=de(l,e),f=u.map(a=>i?[p,Math.round(p/a)]:[Math.round(p*a),p]),C=f.map(([a,n])=>i?n:a).reduce((a,n)=>a+n,s*(t.length+1));i?(o.w=p+s*2,o.h=C):(o.w=C,o.h=p+s*2);let c=s;return t.forEach((a,n)=>{const r=f[n];i?(o.items.push({image:a,x:s,y:c,w:r[0],h:r[1]}),c+=r[1]+s):(o.items.push({image:a,x:c,y:s,w:r[0],h:r[1]}),c+=r[0]+s)}),o}function he(t,e){return ae(t,e,!0)}function _e(t,e){return ae(t,e,!1)}const ve={horizontal:_e,vertical:he};function le(t){let e,l,i,d="Add images",o,u,p,s,f,C="Small",c,a="Medium",n,r="Large",j,k,S,M="Horizontal",I,W="Vertical",A,w,D,z,V,h,T="Reset",N,Y;return{c(){e=g("div"),l=g("label"),i=g("div"),i.textContent=d,o=U(),u=g("input"),p=U(),s=g("select"),f=g("option"),f.textContent=C,c=g("option"),c.textContent=a,n=g("option"),n.textContent=r,j=U(),k=g("select"),S=g("option"),S.textContent=M,I=g("option"),I.textContent=W,A=U(),w=g("input"),D=U(),z=g("input"),V=U(),h=g("button"),h.textContent=T,this.h()},l(E){e=m(E,"DIV",{class:!0});var b=R(e);l=m(b,"LABEL",{class:!0});var H=R(l);i=m(H,"DIV",{class:!0,["data-svelte-h"]:!0}),P(i)!=="svelte-ecwxcw"&&(i.textContent=d),o=x(H),u=m(H,"INPUT",{type:!0,accept:!0,class:!0}),H.forEach(y),p=x(b),s=m(b,"SELECT",{});var G=R(s);f=m(G,"OPTION",{["data-svelte-h"]:!0}),P(f)!=="svelte-cqkaja"&&(f.textContent=C),c=m(G,"OPTION",{["data-svelte-h"]:!0}),P(c)!=="svelte-cdvn1s"&&(c.textContent=a),n=m(G,"OPTION",{["data-svelte-h"]:!0}),P(n)!=="svelte-1ezouf3"&&(n.textContent=r),G.forEach(y),j=x(b),k=m(b,"SELECT",{});var X=R(k);S=m(X,"OPTION",{["data-svelte-h"]:!0}),P(S)!=="svelte-1eqx6rq"&&(S.textContent=M),I=m(X,"OPTION",{["data-svelte-h"]:!0}),P(I)!=="svelte-ahrgri"&&(I.textContent=W),X.forEach(y),A=x(b),w=m(b,"INPUT",{type:!0,min:!0,max:!0,step:!0}),D=x(b),z=m(b,"INPUT",{type:!0}),V=x(b),h=m(b,"BUTTON",{class:!0,["data-svelte-h"]:!0}),P(h)!=="svelte-bt4pce"&&(h.textContent=T),b.forEach(y),this.h()},h(){v(i,"class","button svelte-5xbdg9"),v(u,"type","file"),u.multiple=!0,v(u,"accept","image/png, image/jpeg"),v(u,"class","svelte-5xbdg9"),v(l,"class","input svelte-5xbdg9"),f.__value="s",O(f,f.__value),c.__value="m",O(c,c.__value),n.__value="l",O(n,n.__value),t[3]===void 0&&$(()=>t[16].call(s)),S.__value="horizontal",O(S,S.__value),I.__value="vertical",O(I,I.__value),t[2]===void 0&&$(()=>t[17].call(k)),v(w,"type","range"),v(w,"min","0"),v(w,"max","10"),v(w,"step","1"),v(z,"type","color"),v(h,"class","button reset svelte-5xbdg9"),v(e,"class","panel svelte-5xbdg9")},m(E,b){F(E,e,b),_(e,l),_(l,i),_(l,o),_(l,u),_(e,p),_(e,s),_(s,f),_(s,c),_(s,n),J(s,t[3],!0),_(e,j),_(e,k),_(k,S),_(k,I),J(k,t[2],!0),_(e,A),_(e,w),O(w,t[4]),_(e,D),_(e,z),O(z,t[1]),_(e,V),_(e,h),N||(Y=[L(u,"change",t[10]),L(s,"change",t[16]),L(k,"change",t[17]),L(w,"change",t[18]),L(w,"input",t[18]),L(z,"input",t[19]),L(h,"click",t[11])],N=!0)},p(E,b){b&8&&J(s,E[3]),b&4&&J(k,E[2]),b&16&&O(w,E[4]),b&2&&O(z,E[1])},d(E){E&&y(e),N=!1,ue(Y)}}}function ge(t){let e,l,i="Add images",d,o,u,p;return{c(){e=g("label"),l=g("div"),l.textContent=i,d=U(),o=g("input"),this.h()},l(s){e=m(s,"LABEL",{class:!0});var f=R(e);l=m(f,"DIV",{class:!0,["data-svelte-h"]:!0}),P(l)!=="svelte-ecwxcw"&&(l.textContent=i),d=x(f),o=m(f,"INPUT",{type:!0,accept:!0,class:!0}),f.forEach(y),this.h()},h(){v(l,"class","button svelte-5xbdg9"),v(o,"type","file"),o.multiple=!0,v(o,"accept","image/png, image/jpeg"),v(o,"class","svelte-5xbdg9"),v(e,"class","input svelte-5xbdg9")},m(s,f){F(s,e,f),_(e,l),_(e,d),_(e,o),u||(p=L(o,"change",t[10]),u=!0)},p:q,d(s){s&&y(e),u=!1,p()}}}function me(t){let e;return{c(){e=g("canvas"),this.h()},l(l){e=m(l,"CANVAS",{class:!0}),R(e).forEach(y),this.h()},h(){v(e,"class","canvas svelte-5xbdg9")},m(l,i){F(l,e,i),t[20](e)},p:q,d(l){l&&y(e),t[20](null)}}}function ne(t){let e,l,i="Save",d,o;return{c(){e=g("div"),l=g("button"),l.textContent=i,this.h()},l(u){e=m(u,"DIV",{class:!0});var p=R(e);l=m(p,"BUTTON",{class:!0,["data-svelte-h"]:!0}),P(l)!=="svelte-1ktiavv"&&(l.textContent=i),p.forEach(y),this.h()},h(){v(l,"class","button svelte-5xbdg9"),v(e,"class","save svelte-5xbdg9")},m(u,p){F(u,e,p),_(e,l),d||(o=L(l,"click",t[9]),d=!0)},p:q,d(u){u&&y(e),d=!1,o()}}}function be(t){let e,l,i,d,o,u,p,s=t[0].length>0&&le(t);function f(n,r){return n[0].length>0?me:ge}let C=f(t),c=C(t),a=t[0].length>0&&ne(t);return{c(){s&&s.c(),e=U(),l=g("div"),c.c(),d=U(),a&&a.c(),o=Z(),this.h()},l(n){s&&s.l(n),e=x(n),l=m(n,"DIV",{class:!0});var r=R(l);c.l(r),r.forEach(y),d=x(n),a&&a.l(n),o=Z(),this.h()},h(){v(l,"class",i="canvasWrapper "+(t[7]?"vertical":"horizontal")+" svelte-5xbdg9")},m(n,r){s&&s.m(n,r),F(n,e,r),F(n,l,r),c.m(l,null),t[21](l),F(n,d,r),a&&a.m(n,r),F(n,o,r),u||(p=L(window,"resize",t[8]),u=!0)},p(n,[r]){n[0].length>0?s?s.p(n,r):(s=le(n),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),C===(C=f(n))&&c?c.p(n,r):(c.d(1),c=C(n),c&&(c.c(),c.m(l,null))),r&128&&i!==(i="canvasWrapper "+(n[7]?"vertical":"horizontal")+" svelte-5xbdg9")&&v(l,"class",i),n[0].length>0?a?a.p(n,r):(a=ne(n),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},i:q,o:q,d(n){n&&(y(e),y(l),y(d),y(o)),s&&s.d(n),c.d(),t[21](null),a&&a.d(n),u=!1,p()}}}function K(t,e){return localStorage.getItem(t)||e}function Q(t,e){localStorage.setItem(t,e)}function Ce(t,e,l){t.canvas.width=e.w,t.canvas.height=e.h,t.fillStyle=l,t.fillRect(0,0,e.w,e.h),e.items.forEach(({image:i,x:d,y:o,w:u,h:p},s)=>{t.drawImage(i,d,o,u,p)})}function ye(t,e,l){let i,d,o,u=[],p=[],s=K("backgroundColor","#FFFFFF"),f=K("layoutType","horizontal"),C=K("size","m"),c=Number(K("spacing","3")),a=null,n=null,r={w:0,h:0};function j(h){const T=h.getBoundingClientRect();l(13,r.w=T.width,r),l(13,r.h=T.height,r)}function k(){n&&j(n)}function S(h){h.preventDefault(),a&&fe(a,"collage")}function M(h){const T=h.target;T.files&&(l(12,u=u.concat(Array.from(T.files).map(N=>URL.createObjectURL(N)))),T.value="")}function I(){l(12,u=[])}function W(){C=ee(this),l(3,C)}function A(){f=ee(this),l(2,f)}function w(){c=ce(this.value),l(4,c)}function D(){s=this.value,l(1,s)}function z(h){te[h?"unshift":"push"](()=>{a=h,l(5,a)})}function V(h){te[h?"unshift":"push"](()=>{n=h,l(6,n)})}return t.$$.update=()=>{t.$$.dirty&4096&&Promise.all(u.map(h=>new Promise(T=>{const N=new Image;N.onload=()=>{T(N)},N.src=h}))).then(h=>{l(0,p=h)}),t.$$.dirty&30&&(Q("backgroundColor",s),Q("layoutType",f),Q("size",C),Q("spacing",c.toString())),t.$$.dirty&29&&l(14,i=ve[f](p,{size:C,spacing:c})),t.$$.dirty&32&&l(15,d=a?.getContext("2d")),t.$$.dirty&49154&&d&&requestAnimationFrame(()=>{Ce(d,i,s)}),t.$$.dirty&64&&n&&j(n),t.$$.dirty&24576&&l(7,o=i.w/i.h<r.w/r.h)},[p,s,f,C,c,a,n,o,k,S,M,I,u,r,i,d,W,A,w,D,z,V]}class ke extends ie{constructor(e){super(),oe(this,e,ye,be,re,{})}}export{ke as default};
