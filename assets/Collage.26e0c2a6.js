import{S as Ee,i as Ce,s as Le,e as y,c as k,b as P,d as m,g as f,j as L,n as fe,l as Ye,F as kt,a as D,t as Z,f as V,p as $,G as q,k as b,m as T,H as It,I as St,J as Ke,K as Je,L as Qe,M as Xe,u as Y,y as Ze,w as x,v as $e,o as Et,N as Ct,O as Oe,E as ae,P as Ue,Q as ge,z as _e,D as he,A as me,B as ve,R as be,C as we,r as Ne,T as re,h as X}from"./index.a18ea272.js";import{e as ye}from"./each.3d878967.js";const Lt="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Nt=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=Lt[n[t]&63];return e};function Pe(t,e,n){const i=t.slice();return i[5]=e[n],i}function Re(t){let e,n,i,u=!1,s,l,o=t[5].label+"",r,a,p,g,h;return p=kt(t[4][0]),{c(){e=y("label"),n=y("input"),s=D(),l=y("span"),r=Z(o),a=D(),this.h()},l(d){e=k(d,"LABEL",{class:!0});var c=P(e);n=k(c,"INPUT",{type:!0,name:!0,class:!0}),s=V(c),l=k(c,"SPAN",{class:!0});var w=P(l);r=$(w,o),w.forEach(m),a=V(c),c.forEach(m),this.h()},h(){f(n,"type","radio"),f(n,"name",t[2]),n.__value=i=t[5].value,q(n,n.__value),f(n,"class","svelte-1sfeang"),f(l,"class","button svelte-1sfeang"),f(e,"class","wrapper svelte-1sfeang"),p.p(n)},m(d,c){L(d,e,c),b(e,n),n.checked=n.__value===t[0],b(e,s),b(e,l),b(l,r),b(e,a),g||(h=T(n,"change",t[3]),g=!0)},p(d,c){c&2&&i!==(i=d[5].value)&&(n.__value=i,q(n,n.__value),u=!0),(u||c&3)&&(n.checked=n.__value===d[0]),c&2&&o!==(o=d[5].label+"")&&It(r,o)},d(d){d&&m(e),p.r(),g=!1,h()}}}function Tt(t){let e,n=ye(t[1]),i=[];for(let u=0;u<n.length;u+=1)i[u]=Re(Pe(t,n,u));return{c(){e=y("div");for(let u=0;u<i.length;u+=1)i[u].c();this.h()},l(u){e=k(u,"DIV",{class:!0});var s=P(e);for(let l=0;l<i.length;l+=1)i[l].l(s);s.forEach(m),this.h()},h(){f(e,"class","group svelte-1sfeang")},m(u,s){L(u,e,s);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null)},p(u,[s]){if(s&7){n=ye(u[1]);let l;for(l=0;l<n.length;l+=1){const o=Pe(u,n,l);i[l]?i[l].p(o,s):(i[l]=Re(o),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},i:fe,o:fe,d(u){u&&m(e),Ye(i,u)}}}function At(t,e,n){const i=Nt();let{options:u=[]}=e,{value:s}=e;const l=[[]];function o(){s=this.__value,n(0,s)}return t.$$set=r=>{"options"in r&&n(1,u=r.options),"value"in r&&n(0,s=r.value)},[s,u,i,o,l]}class Se extends Ee{constructor(e){super(),Ce(this,e,At,Tt,Le,{options:1,value:0})}}function ze(t,{delay:e=0,duration:n=400,easing:i=St}={}){const u=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:s=>`opacity: ${s*u}`}}const Ot=t=>({}),Be=t=>({});function De(t){let e,n,i;const u=t[5].default,s=Ke(u,t,t[4],null);return{c(){e=y("nav"),s&&s.c(),this.h()},l(l){e=k(l,"NAV",{class:!0,"aria-label":!0});var o=P(e);s&&s.l(o),o.forEach(m),this.h()},h(){f(e,"class","menu svelte-v9qt9l"),f(e,"aria-label",t[1])},m(l,o){L(l,e,o),s&&s.m(e,null),i=!0},p(l,o){s&&s.p&&(!i||o&16)&&Je(s,u,l,l[4],i?Xe(u,l[4],o,null):Qe(l[4]),null),(!i||o&2)&&f(e,"aria-label",l[1])},i(l){i||(Y(s,l),l&&Ct(()=>{i&&(n||(n=Oe(e,ze,{duration:100},!0)),n.run(1))}),i=!0)},o(l){x(s,l),l&&(n||(n=Oe(e,ze,{duration:100},!1)),n.run(0)),i=!1},d(l){l&&m(e),s&&s.d(l),l&&n&&n.end()}}}function Ut(t){let e,n,i,u,s,l;const o=t[5].trigger,r=Ke(o,t,t[4],Be);let a=t[0]&&De(t);return{c(){e=y("details"),n=y("summary"),r&&r.c(),i=D(),a&&a.c(),this.h()},l(p){e=k(p,"DETAILS",{class:!0});var g=P(e);n=k(g,"SUMMARY",{class:!0});var h=P(n);r&&r.l(h),h.forEach(m),i=V(g),a&&a.l(g),g.forEach(m),this.h()},h(){f(n,"class","summary svelte-v9qt9l"),f(e,"class","dropdown svelte-v9qt9l")},m(p,g){L(p,e,g),b(e,n),r&&r.m(n,null),b(e,i),a&&a.m(e,null),t[6](e),u=!0,s||(l=T(e,"toggle",t[3]),s=!0)},p(p,[g]){r&&r.p&&(!u||g&16)&&Je(r,o,p,p[4],u?Xe(o,p[4],g,Ot):Qe(p[4]),Be),p[0]?a?(a.p(p,g),g&1&&Y(a,1)):(a=De(p),a.c(),Y(a,1),a.m(e,null)):a&&(Ze(),x(a,1,1,()=>{a=null}),$e())},i(p){u||(Y(r,p),Y(a),u=!0)},o(p){x(r,p),x(a),u=!1},d(p){p&&m(e),r&&r.d(p),a&&a.d(),t[6](null),s=!1,l()}}}function Pt(t,e,n){let{$$slots:i={},$$scope:u}=e,{isOpen:s=!1}=e,{label:l="Меню"}=e,o;function r(g){n(0,s=g.target.open)}function a(g){g.key==="Escape"&&s&&(n(0,s=!1),o?.querySelector("summary")?.focus())}Et(()=>(document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)));function p(g){ae[g?"unshift":"push"](()=>{o=g,n(2,o),n(0,s)})}return t.$$set=g=>{"isOpen"in g&&n(0,s=g.isOpen),"label"in g&&n(1,l=g.label),"$$scope"in g&&n(4,u=g.$$scope)},t.$$.update=()=>{t.$$.dirty&5&&o&&n(2,o.open=s,o)},[s,l,o,r,u,i,p]}class Rt extends Ee{constructor(e){super(),Ce(this,e,Pt,Ut,Le,{isOpen:0,label:1})}}const ce=document.createElement("a");document.body.appendChild(ce);ce.style.display="none";function Ie(t,e){return new Promise(n=>{t.toBlob(i=>{if(i){const u=URL.createObjectURL(i);ce.href=u,ce.download=`${e}.jpg`,ce.click(),URL.revokeObjectURL(u),n(i)}},"image/jpeg")})}const zt={s:1e3,m:2e3,l:3e3};function xe(t){return zt[t]}function Ve(t,e){return xe(e)*(t/100)}function et(t,{size:e,spacing:n,padding:i},u){const l={items:[],w:0,h:0},o=t.map(c=>c.width/c.height),r=xe(e),a=Ve(n,e),p=Ve(i,e),g=o.map(c=>u?[r,Math.round(r/c)]:[Math.round(r*c),r]),h=g.map(([c,w])=>u?w:c).reduce((c,w)=>c+w,a*(t.length-1)+p*2);u?(l.w=r+p*2,l.h=h):(l.w=h,l.h=r+p*2);let d=p;return t.forEach((c,w)=>{const O=g[w];u?(l.items.push({image:c,x:p,y:d,w:O[0],h:O[1]}),d+=O[1]+a):(l.items.push({image:c,x:d,y:p,w:O[0],h:O[1]}),d+=O[0]+a)}),l}function Bt(t,e){return et(t,e,!0)}function Dt(t,e){return et(t,e,!1)}const Vt={horizontal:Dt,vertical:Bt};async function Ft(t){return Promise.all(t.map(e=>new Promise(n=>{const i=new Image;i.onload=()=>{n(i)},i.src=e})))}function Fe(t,e,n){const i=t.slice();return i[56]=e[n],i[58]=n,i}function Me(t){let e,n,i,u="+",s,l,o,r,a,p,g,h,d,c,w;function O(E){t[30](E)}let F={options:[{value:"horizontal",label:"Horizontal"},{value:"vertical",label:"Vertical"}]};t[2]!==void 0&&(F.value=t[2]),r=new Se({props:F}),ae.push(()=>ge(r,"value",O));function B(E){t[43](E)}let W={$$slots:{trigger:[jt],default:[Mt]},$$scope:{ctx:t}};return t[17]!==void 0&&(W.isOpen=t[17]),g=new Rt({props:W}),ae.push(()=>ge(g,"isOpen",B)),{c(){e=y("div"),n=y("label"),i=y("div"),i.textContent=u,s=D(),l=y("input"),o=D(),_e(r.$$.fragment),p=D(),_e(g.$$.fragment),this.h()},l(E){e=k(E,"DIV",{class:!0});var C=P(e);n=k(C,"LABEL",{class:!0});var R=P(n);i=k(R,"DIV",{class:!0,["data-svelte-h"]:!0}),he(i)!=="svelte-evoge6"&&(i.textContent=u),s=V(R),l=k(R,"INPUT",{type:!0,accept:!0,class:!0}),R.forEach(m),o=V(C),me(r.$$.fragment,C),p=V(C),me(g.$$.fragment,C),C.forEach(m),this.h()},h(){f(i,"class","button svelte-euwbvc"),f(l,"type","file"),l.multiple=!0,f(l,"accept","image/png, image/jpeg"),f(l,"class","svelte-euwbvc"),f(n,"class","input svelte-euwbvc"),f(e,"class","panel svelte-euwbvc")},m(E,C){L(E,e,C),b(e,n),b(n,i),b(n,s),b(n,l),b(e,o),ve(r,e,null),b(e,p),ve(g,e,null),d=!0,c||(w=T(l,"change",t[24]),c=!0)},p(E,C){const R={};!a&&C[0]&4&&(a=!0,R.value=E[2],be(()=>a=!1)),r.$set(R);const H={};C[0]&102394|C[1]&268435456&&(H.$$scope={dirty:C,ctx:E}),!h&&C[0]&131072&&(h=!0,H.isOpen=E[17],be(()=>h=!1)),g.$set(H)},i(E){d||(Y(r.$$.fragment,E),Y(g.$$.fragment,E),d=!0)},o(E){x(r.$$.fragment,E),x(g.$$.fragment,E),d=!1},d(E){E&&m(e),we(r),we(g),c=!1,w()}}}function je(t){let e,n,i,u,s;return{c(){e=y("label"),n=y("input"),i=Z(`
            Cut by 3s`),this.h()},l(l){e=k(l,"LABEL",{});var o=P(e);n=k(o,"INPUT",{type:!0}),i=$(o,`
            Cut by 3s`),o.forEach(m),this.h()},h(){f(n,"type","checkbox")},m(l,o){L(l,e,o),b(e,n),n.checked=t[15],b(e,i),u||(s=T(n,"change",t[33]),u=!0)},p(l,o){o[0]&32768&&(n.checked=l[15])},d(l){l&&m(e),u=!1,s()}}}function He(t){let e,n,i,u,s;return{c(){e=y("label"),n=y("input"),i=Z(`
            Cut by halves`),this.h()},l(l){e=k(l,"LABEL",{});var o=P(e);n=k(o,"INPUT",{type:!0}),i=$(o,`
            Cut by halves`),o.forEach(m),this.h()},h(){f(n,"type","checkbox")},m(l,o){L(l,e,o),b(e,n),n.checked=t[16],b(e,i),u||(s=T(n,"change",t[34]),u=!0)},p(l,o){o[0]&65536&&(n.checked=l[16])},d(l){l&&m(e),u=!1,s()}}}function qe(t){let e,n,i,u,s,l,o,r,a,p,g;return{c(){e=y("label"),n=y("input"),i=Z(`
            Noise over image`),u=Z(`
          Intensity: `),s=y("input"),l=Z(`
          Smoothness: `),o=y("input"),r=Z(`
          Size: `),a=y("input"),this.h()},l(h){e=k(h,"LABEL",{});var d=P(e);n=k(d,"INPUT",{type:!0}),i=$(d,`
            Noise over image`),d.forEach(m),u=$(h,`
          Intensity: `),s=k(h,"INPUT",{type:!0,class:!0,min:!0,max:!0,step:!0}),l=$(h,`
          Smoothness: `),o=k(h,"INPUT",{type:!0,class:!0,min:!0,max:!0,step:!0}),r=$(h,`
          Size: `),a=k(h,"INPUT",{type:!0,class:!0,min:!0,max:!0,step:!0}),this.h()},h(){f(n,"type","checkbox"),f(s,"type","range"),f(s,"class","spacingInput svelte-euwbvc"),f(s,"min","0"),f(s,"max","1"),f(s,"step","0.05"),f(o,"type","range"),f(o,"class","spacingInput svelte-euwbvc"),f(o,"min","0"),f(o,"max","3"),f(o,"step","0.5"),f(a,"type","range"),f(a,"class","spacingInput svelte-euwbvc"),f(a,"min","1"),f(a,"max","5"),f(a,"step","1")},m(h,d){L(h,e,d),b(e,n),n.checked=t[8],b(e,i),L(h,u,d),L(h,s,d),q(s,t[9]),L(h,l,d),L(h,o,d),q(o,t[10]),L(h,r,d),L(h,a,d),q(a,t[11]),p||(g=[T(n,"change",t[39]),T(s,"change",t[40]),T(s,"input",t[40]),T(o,"change",t[41]),T(o,"input",t[41]),T(a,"change",t[42]),T(a,"input",t[42])],p=!0)},p(h,d){d[0]&256&&(n.checked=h[8]),d[0]&512&&q(s,h[9]),d[0]&1024&&q(o,h[10]),d[0]&2048&&q(a,h[11])},d(h){h&&(m(e),m(u),m(s),m(l),m(o),m(r),m(a)),p=!1,Ne(g)}}}function Mt(t){let e,n,i,u,s,l,o,r,a,p,g,h,d,c,w,O,F,B,W,E,C,R;function H(I){t[31](I)}let K={options:[{value:"s",label:"S"},{value:"m",label:"M"},{value:"l",label:"L"}]};t[3]!==void 0&&(K.value=t[3]),n=new Se({props:K}),ae.push(()=>ge(n,"value",H));function G(I){t[32](I)}let ee={options:[{value:"auto",label:"Auto"},{value:(1/1).toString(),label:"1/1"},{value:(3/4).toString(),label:"3/4"},{value:(4/3).toString(),label:"4/3"},{value:(4/5).toString(),label:"4/5"},{value:(5/4).toString(),label:"5/4"},{value:(16/9).toString(),label:"16/9"},{value:(9/16).toString(),label:"9/16"},{value:t[21],label:"8/5"},{value:t[20],label:"12/5"}]};t[6]!==void 0&&(ee.value=t[6]),s=new Se({props:ee}),ae.push(()=>ge(s,"value",G));let N=t[6]===t[20]&&je(t),A=t[6]===t[21]&&He(t),U=t[7]&&qe(t);return{c(){e=y("div"),_e(n.$$.fragment),u=D(),_e(s.$$.fragment),o=D(),N&&N.c(),r=D(),A&&A.c(),a=D(),p=y("input"),g=Z(`

          Spacing: `),h=y("input"),d=Z(`
          Padding: `),c=y("input"),w=D(),O=y("label"),F=y("input"),B=Z(`
          Noise`),W=D(),U&&U.c(),this.h()},l(I){e=k(I,"DIV",{class:!0});var S=P(e);me(n.$$.fragment,S),u=V(S),me(s.$$.fragment,S),o=V(S),N&&N.l(S),r=V(S),A&&A.l(S),a=V(S),p=k(S,"INPUT",{type:!0}),g=$(S,`

          Spacing: `),h=k(S,"INPUT",{type:!0,class:!0,min:!0,max:!0,step:!0}),d=$(S,`
          Padding: `),c=k(S,"INPUT",{type:!0,class:!0,min:!0,max:!0,step:!0}),w=V(S),O=k(S,"LABEL",{});var te=P(O);F=k(te,"INPUT",{type:!0}),B=$(te,`
          Noise`),te.forEach(m),W=V(S),U&&U.l(S),S.forEach(m),this.h()},h(){f(p,"type","color"),f(h,"type","range"),f(h,"class","spacingInput svelte-euwbvc"),f(h,"min","0"),f(h,"max","10"),f(h,"step","1"),f(c,"type","range"),f(c,"class","spacingInput svelte-euwbvc"),f(c,"min","0"),f(c,"max","10"),f(c,"step","1"),f(F,"type","checkbox"),f(e,"class","settingsMenu svelte-euwbvc")},m(I,S){L(I,e,S),ve(n,e,null),b(e,u),ve(s,e,null),b(e,o),N&&N.m(e,null),b(e,r),A&&A.m(e,null),b(e,a),b(e,p),q(p,t[1]),b(e,g),b(e,h),q(h,t[4]),b(e,d),b(e,c),q(c,t[5]),b(e,w),b(e,O),b(O,F),F.checked=t[7],b(O,B),b(e,W),U&&U.m(e,null),E=!0,C||(R=[T(p,"input",t[35]),T(h,"change",t[36]),T(h,"input",t[36]),T(c,"change",t[37]),T(c,"input",t[37]),T(F,"change",t[38])],C=!0)},p(I,S){const te={};!i&&S[0]&8&&(i=!0,te.value=I[3],be(()=>i=!1)),n.$set(te);const M={};!l&&S[0]&64&&(l=!0,M.value=I[6],be(()=>l=!1)),s.$set(M),I[6]===I[20]?N?N.p(I,S):(N=je(I),N.c(),N.m(e,r)):N&&(N.d(1),N=null),I[6]===I[21]?A?A.p(I,S):(A=He(I),A.c(),A.m(e,a)):A&&(A.d(1),A=null),S[0]&2&&q(p,I[1]),S[0]&16&&q(h,I[4]),S[0]&32&&q(c,I[5]),S[0]&128&&(F.checked=I[7]),I[7]?U?U.p(I,S):(U=qe(I),U.c(),U.m(e,null)):U&&(U.d(1),U=null)},i(I){E||(Y(n.$$.fragment,I),Y(s.$$.fragment,I),E=!0)},o(I){x(n.$$.fragment,I),x(s.$$.fragment,I),E=!1},d(I){I&&m(e),we(n),we(s),N&&N.d(),A&&A.d(),U&&U.d(),C=!1,Ne(R)}}}function jt(t){let e,n="Settings";return{c(){e=y("div"),e.textContent=n,this.h()},l(i){e=k(i,"DIV",{class:!0,slot:!0,["data-svelte-h"]:!0}),he(e)!=="svelte-jbxl7d"&&(e.textContent=n),this.h()},h(){f(e,"class","button svelte-euwbvc"),f(e,"slot","trigger")},m(i,u){L(i,e,u)},p:fe,d(i){i&&m(e)}}}function Ht(t){let e,n,i="Add images",u,s,l,o;return{c(){e=y("label"),n=y("div"),n.textContent=i,u=D(),s=y("input"),this.h()},l(r){e=k(r,"LABEL",{class:!0});var a=P(e);n=k(a,"DIV",{class:!0,["data-svelte-h"]:!0}),he(n)!=="svelte-ecwxcw"&&(n.textContent=i),u=V(a),s=k(a,"INPUT",{type:!0,accept:!0,class:!0}),a.forEach(m),this.h()},h(){f(n,"class","button svelte-euwbvc"),f(s,"type","file"),s.multiple=!0,f(s,"accept","image/png, image/jpeg"),f(s,"class","svelte-euwbvc"),f(e,"class","input svelte-euwbvc")},m(r,a){L(r,e,a),b(e,n),b(e,u),b(e,s),l||(o=T(s,"change",t[24]),l=!0)},p:fe,d(r){r&&m(e),l=!1,o()}}}function qt(t){let e,n,i,u,s=ye(t[14].items),l=[];for(let o=0;o<s.length;o+=1)l[o]=We(Fe(t,s,o));return{c(){e=y("canvas"),n=D(),i=y("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=k(o,"CANVAS",{class:!0}),P(e).forEach(m),n=V(o),i=k(o,"DIV",{class:!0,style:!0});var r=P(i);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){f(e,"class","canvas svelte-euwbvc"),f(i,"class",u="grid "+(t[15]?"cutByThirds":"")+" "+(t[16]?"cutByHalves":"")+" svelte-euwbvc"),X(i,"aspect-ratio",t[14].w/t[14].h)},m(o,r){L(o,e,r),t[44](e),L(o,n,r),L(o,i,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(i,null)},p(o,r){if(r[0]&540672){s=ye(o[14].items);let a;for(a=0;a<s.length;a+=1){const p=Fe(o,s,a);l[a]?l[a].p(p,r):(l[a]=We(p),l[a].c(),l[a].m(i,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=s.length}r[0]&98304&&u!==(u="grid "+(o[15]?"cutByThirds":"")+" "+(o[16]?"cutByHalves":"")+" svelte-euwbvc")&&f(i,"class",u),r[0]&16384&&X(i,"aspect-ratio",o[14].w/o[14].h)},d(o){o&&(m(e),m(n),m(i)),t[44](null),Ye(l,o)}}}function We(t){let e,n,i;function u(){return t[45](t[58])}return{c(){e=y("div"),this.h()},l(s){e=k(s,"DIV",{class:!0,style:!0,role:!0}),P(e).forEach(m),this.h()},h(){f(e,"class","grid-item svelte-euwbvc"),X(e,"width",t[56].w/t[14].w*100+"%"),X(e,"height",t[56].h/t[14].h*100+"%"),X(e,"left",t[56].x/t[14].w*100+"%"),X(e,"top",t[56].y/t[14].h*100+"%"),f(e,"role","presentation")},m(s,l){L(s,e,l),n||(i=T(e,"click",u),n=!0)},p(s,l){t=s,l[0]&16384&&X(e,"width",t[56].w/t[14].w*100+"%"),l[0]&16384&&X(e,"height",t[56].h/t[14].h*100+"%"),l[0]&16384&&X(e,"left",t[56].x/t[14].w*100+"%"),l[0]&16384&&X(e,"top",t[56].y/t[14].h*100+"%")},d(s){s&&m(e),n=!1,i()}}}function Ge(t){let e,n,i="Save",u,s,l="Reset",o,r;return{c(){e=y("div"),n=y("button"),n.textContent=i,u=D(),s=y("button"),s.textContent=l,this.h()},l(a){e=k(a,"DIV",{class:!0});var p=P(e);n=k(p,"BUTTON",{class:!0,["data-svelte-h"]:!0}),he(n)!=="svelte-1ktiavv"&&(n.textContent=i),u=V(p),s=k(p,"BUTTON",{class:!0,["data-svelte-h"]:!0}),he(s)!=="svelte-bt4pce"&&(s.textContent=l),p.forEach(m),this.h()},h(){f(n,"class","button svelte-euwbvc"),f(s,"class","button reset svelte-euwbvc"),f(e,"class","save svelte-euwbvc")},m(a,p){L(a,e,p),b(e,n),b(e,u),b(e,s),o||(r=[T(n,"click",t[23]),T(s,"click",t[25])],o=!0)},p:fe,d(a){a&&m(e),o=!1,Ne(r)}}}function Wt(t){let e,n,i,u,s,l,o,r,a=t[0].length>0&&Me(t);function p(c,w){return c[0].length>0?qt:Ht}let g=p(t),h=g(t),d=t[0].length>0&&Ge(t);return{c(){a&&a.c(),e=D(),n=y("div"),h.c(),u=D(),d&&d.c(),s=Ue(),this.h()},l(c){a&&a.l(c),e=V(c),n=k(c,"DIV",{class:!0});var w=P(n);h.l(w),w.forEach(m),u=V(c),d&&d.l(c),s=Ue(),this.h()},h(){f(n,"class",i="canvasWrapper "+(t[18]?"vertical":"horizontal")+" svelte-euwbvc")},m(c,w){a&&a.m(c,w),L(c,e,w),L(c,n,w),h.m(n,null),t[46](n),L(c,u,w),d&&d.m(c,w),L(c,s,w),l=!0,o||(r=T(window,"resize",t[22]),o=!0)},p(c,w){c[0].length>0?a?(a.p(c,w),w[0]&1&&Y(a,1)):(a=Me(c),a.c(),Y(a,1),a.m(e.parentNode,e)):a&&(Ze(),x(a,1,1,()=>{a=null}),$e()),g===(g=p(c))&&h?h.p(c,w):(h.d(1),h=g(c),h&&(h.c(),h.m(n,null))),(!l||w[0]&262144&&i!==(i="canvasWrapper "+(c[18]?"vertical":"horizontal")+" svelte-euwbvc"))&&f(n,"class",i),c[0].length>0?d?d.p(c,w):(d=Ge(c),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null)},i(c){l||(Y(a),l=!0)},o(c){x(a),l=!1},d(c){c&&(m(e),m(n),m(u),m(s)),a&&a.d(c),h.d(),t[46](null),d&&d.d(c),o=!1,r()}}}function J(t,e){return localStorage.getItem(t)||e}function Q(t,e){localStorage.setItem(t,e)}function Gt(t){return t==="auto"?t:Number(t)}function Yt(t){const e=t.map(u=>u.width/u.height),n=e.reduce((u,s)=>u+s,0),i=e.map(u=>1/u).reduce((u,s)=>u+s,0);return n<i?"horizontal":"vertical"}function Kt(t,e){if(e==="auto")return t;if(t.w/t.h>e){const i=t.w/e,u=(i-t.h)/2;t.items.forEach(s=>{s.y+=u}),t.h=i}else{const i=t.h*e,u=(i-t.w)/2;t.items.forEach(s=>{s.x+=u}),t.w=i}return t}function Jt(t,e,n){let i,u,s,l=[],o=[],r=null,a=[];function p(_){if(r!==_)if(r!==null){const v=r,j=_,z=l[v],se=l[j];n(26,l=l.map((ie,ne)=>ne===v?se:ne===j?z:ie)),r=null}else r=_}const g=(12/5).toString(),h=(8/5).toString();let d=J("backgroundColor","#FFFFFF"),c=J("layoutType","horizontal"),w=J("size","m"),O=Number(J("spacing","3")),F=Number(J("padding","3")),B=J("aspectRatio","auto"),W=B===g,E=B===h,C=J("noise","false")==="true",R=J("noiseOverImage","false")==="true",H=Number(J("noiseIntensity","0.2")),K=Number(J("noiseSmoothness","0")),G=Number(J("noiseSize","1")),ee=!0;const N=document.createElement("canvas"),A=N.getContext("2d");let U=!0;function I(_,v){if(!A)return;N.width=_,N.height=v;const j=A.createImageData(_,v),z=j.data;for(let se=0;se<v;se+=G)for(let ie=0;ie<_;ie+=G){const ne=Math.floor((Math.random()-.5)*255*H);for(let ue=0;ue<G;ue++)for(let pe=0;pe<G;pe++){const Ae=ie+pe+(se+ue)*_;if(Ae>=_*v)continue;const de=Ae*4;z[de+0]=ne+128,z[de+1]=ne+128,z[de+2]=ne+128,z[de+3]=255*H}}A.putImageData(j,0,0),K>0&&(A.filter=`blur(${K}px)`,A.drawImage(N,0,0))}function S(_){U&&(I(_.canvas.width,_.canvas.height),U=!1),_.globalCompositeOperation="hard-light",_.drawImage(N,0,0),_.globalCompositeOperation="source-over",_.globalAlpha=.2,_.drawImage(N,0,0),_.globalAlpha=1}function te(_,v,j){_.canvas.width=v.w,_.canvas.height=v.h,_.fillStyle=j,_.fillRect(0,0,v.w,v.h),C&&!R&&S(_),v.items.forEach(({image:z,x:se,y:ie,w:ne,h:ue},pe)=>{_.drawImage(z,se,ie,ne,ue)}),C&&R&&S(_)}let M=null,oe=null,le={w:0,h:0};function Te(_){if(!_)return;const v=_.getBoundingClientRect();n(28,le.w=v.width,le),n(28,le.h=v.height,le)}function tt(){Te(oe)}async function nt(_){if(_.preventDefault(),M)if(W){const v=document.createElement("canvas"),j=v.getContext("2d");if(!j)return;v.height=M.height,v.width=M.width/3;for(let z=0;z<3;z+=1)j.drawImage(M,v.width*z,0,v.width,v.height,0,0,v.width,v.height),await Ie(v,"collage-thirds-"+(z+1))}else if(E){const v=document.createElement("canvas"),j=v.getContext("2d");if(!j)return;v.height=M.height,v.width=M.width/2;for(let z=0;z<2;z+=1)j.drawImage(M,v.width*z,0,v.width,v.height,0,0,v.width,v.height),await Ie(v,"collage-havles-"+(z+1))}else{const v=o.length===1?o[0].name.split(".").slice(0,-1).join(".")+"-collage":"collage";await Ie(M,v)}}function lt(_){const v=_.target;v.files&&(o=Array.from(v.files),n(26,l=l.concat(o.map(j=>URL.createObjectURL(j)))),v.value="",n(27,ee=!0))}function st(){n(26,l=[]),o=[]}let ke=!1;function it(_){c=_,n(2,c),n(27,ee),n(0,a),n(26,l)}function at(_){w=_,n(3,w)}function ot(_){B=_,n(6,B)}function ut(){W=this.checked,n(15,W),n(6,B)}function rt(){E=this.checked,n(16,E),n(6,B)}function ct(){d=this.value,n(1,d)}function ft(){O=re(this.value),n(4,O)}function ht(){F=re(this.value),n(5,F)}function pt(){C=this.checked,n(7,C)}function dt(){R=this.checked,n(8,R)}function gt(){H=re(this.value),n(9,H)}function _t(){K=re(this.value),n(10,K)}function mt(){G=re(this.value),n(11,G)}function vt(_){ke=_,n(17,ke)}function bt(_){ae[_?"unshift":"push"](()=>{M=_,n(12,M)})}const wt=_=>p(_);function yt(_){ae[_?"unshift":"push"](()=>{oe=_,n(13,oe)})}return t.$$.update=()=>{t.$$.dirty[0]&67108864&&Ft(l).then(_=>{n(0,a=_)}),t.$$.dirty[0]&134217729&&ee&&a.length>0&&(n(2,c=Yt(a)),n(27,ee=!1)),t.$$.dirty[0]&4094&&(Q("backgroundColor",d),Q("layoutType",c),Q("size",w),Q("spacing",O.toString()),Q("padding",F.toString()),Q("aspectRatio",B),Q("noise",C?"true":"false"),Q("noiseOverImage",R?"true":"false"),Q("noiseIntensity",H.toString()),Q("noiseSmoothness",K.toString()),Q("noiseSize",G.toString())),t.$$.dirty[0]&64&&(B!==g&&n(15,W=!1),B!==h&&n(16,E=!1)),t.$$.dirty[0]&125&&n(14,i=Kt(Vt[c](a,{size:w,spacing:O,padding:F}),Gt(B))),t.$$.dirty[0]&16384&&i.w&&(U=!0),t.$$.dirty[0]&4096&&n(29,u=M?.getContext("2d")),t.$$.dirty[0]&536891267&&(console.log(C,R,H,K,G),u&&a.length&&requestAnimationFrame(()=>{te(u,i,d)})),t.$$.dirty[0]&3584&&(console.log(H,K,G),U=!0),t.$$.dirty[0]&268451840&&n(18,s=i.w/i.h<le.w/le.h),t.$$.dirty[0]&8192&&Te(oe)},[a,d,c,w,O,F,B,C,R,H,K,G,M,oe,i,W,E,ke,s,p,g,h,tt,nt,lt,st,l,ee,le,u,it,at,ot,ut,rt,ct,ft,ht,pt,dt,gt,_t,mt,vt,bt,wt,yt]}class Zt extends Ee{constructor(e){super(),Ce(this,e,Jt,Wt,Le,{},null,[-1,-1])}}export{Zt as default};
