import{S as q,i as B,s as D,e as P,c as I,q as L,g as d,j as H,m as g,n as b,d as y,r as W,u as R,a as U,b as X,f as E,v as _,k as v,w as k,x as C,y as Y,o as N,z as V,A as x,B as F,C as J,D as O}from"./index.669fa2c9.js";/* empty css                        */const j=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,{window:Q}=j;function Z(o){let e,n="Back",l,i;return{c(){e=P("a"),e.textContent=n,this.h()},l(r){e=I(r,"A",{href:!0,class:!0,["data-svelte-h"]:!0}),L(e)!=="svelte-1nn2gax"&&(e.textContent=n),this.h()},h(){d(e,"href","."),d(e,"class","back svelte-z80bok")},m(r,c){H(r,e,c),o[5](e),l||(i=[g(Q,"keyup",o[1]),g(e,"click",o[2])],l=!0)},p:b,i:b,o:b,d(r){r&&y(e),o[5](null),l=!1,W(i)}}}function S(o){window.history.back(),setTimeout(()=>{window.location=o},50)}function A(o){window.history.replaceState(null,"",`./${o}`),window.location.reload()}function $(o,e,n){let{prevPhotoId:l=null}=e,{nextPhotoId:i=null}=e,r;function c(a){a.key==="Escape"&&S("."),a.key==="ArrowLeft"&&l&&A(l),a.key==="ArrowRight"&&i&&A(i)}function f(a){a.preventDefault(),S(r.href)}function m(a){R[a?"unshift":"push"](()=>{r=a,n(0,r)})}return o.$$set=a=>{"prevPhotoId"in a&&n(3,l=a.prevPhotoId),"nextPhotoId"in a&&n(4,i=a.nextPhotoId)},[r,c,f,l,i,m]}class ee extends q{constructor(e){super(),B(this,e,$,Z,D,{prevPhotoId:3,nextPhotoId:4})}}const{window:te}=j;function M(o){let e,n;return e=new ee({props:{prevPhotoId:o[1],nextPhotoId:o[2]}}),{c(){V(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,i){F(e,l,i),n=!0},p(l,i){const r={};i&2&&(r.prevPhotoId=l[1]),i&4&&(r.nextPhotoId=l[2]),e.$set(r)},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){C(e.$$.fragment,l),n=!1},d(l){J(e,l)}}}function ne(o){let e,n,l,i,r,c,f,m,a,h,w,p,t=!o[4]&&M(o);return{c(){e=P("div"),n=P("img"),r=U(),c=P("img"),m=U(),t&&t.c(),this.h()},l(s){e=I(s,"DIV",{class:!0});var u=X(e);n=I(u,"IMG",{class:!0,src:!0,"data-src":!0,alt:!0}),r=E(u),c=I(u,"IMG",{src:!0,class:!0,alt:!0}),m=E(u),t&&t.l(u),u.forEach(y),this.h()},h(){d(n,"class","photo svelte-x4sw0n"),_(n.src,l=o[3]?o[5]:`data:image/png;base64,${o[0].data.placeholder}`)||d(n,"src",l),d(n,"data-src",""),d(n,"alt",i=o[0].data.title),_(c.src,f="data:image/png;base64,"+o[0].data.placeholder)||d(c,"src",f),d(c,"class","placeholder svelte-x4sw0n"),d(c,"alt","placeholder"),d(e,"class",a="preview "+(o[3]?"loaded":"")+" "+(o[4]?"full":"")+" svelte-x4sw0n")},m(s,u){H(s,e,u),v(e,n),v(e,r),v(e,c),v(e,m),t&&t.m(e,null),h=!0,w||(p=[g(te,"keyup",o[7]),g(n,"click",o[6]),g(n,"keyup",oe)],w=!0)},p(s,[u]){(!h||u&41&&!_(n.src,l=s[3]?s[5]:`data:image/png;base64,${s[0].data.placeholder}`))&&d(n,"src",l),(!h||u&1&&i!==(i=s[0].data.title))&&d(n,"alt",i),(!h||u&1&&!_(c.src,f="data:image/png;base64,"+s[0].data.placeholder))&&d(c,"src",f),s[4]?t&&(O(),C(t,1,1,()=>{t=null}),Y()):t?(t.p(s,u),u&16&&k(t,1)):(t=M(s),t.c(),k(t,1),t.m(e,null)),(!h||u&24&&a!==(a="preview "+(s[3]?"loaded":"")+" "+(s[4]?"full":"")+" svelte-x4sw0n"))&&d(e,"class",a)},i(s){h||(k(t),h=!0)},o(s){C(t),h=!1},d(s){s&&y(e),t&&t.d(),w=!1,W(p)}}}function oe(){}function le(o){return new Promise(e=>{setTimeout(e,o)})}function ae(o,e,n){let l,{photo:i}=e,{prevPhotoId:r=null}=e,{nextPhotoId:c=null}=e,{baseUrl:f}=e,m=!1,a=!1;function h(t){if(!a){const{pageX:s,pageY:u}=t;setTimeout(()=>{const z=document.documentElement.scrollWidth-window.innerWidth,G=document.documentElement.scrollHeight-window.innerHeight,T=K=>Math.round(K*100)/100;window.scrollTo(z*T(s/window.innerWidth),G*T(u/window.innerHeight))})}n(4,a=!a)}function w(){return new Promise(t=>{const s=new Image;s.onload=()=>{t(!0)},s.src=l.href})}function p(t){t.key==="Escape"&&n(4,a=!1)}return N(()=>{Promise.all([w(),le(400)]).then(()=>{n(3,m=!0)})}),o.$$set=t=>{"photo"in t&&n(0,i=t.photo),"prevPhotoId"in t&&n(1,r=t.prevPhotoId),"nextPhotoId"in t&&n(2,c=t.nextPhotoId),"baseUrl"in t&&n(8,f=t.baseUrl)},o.$$.update=()=>{o.$$.dirty&257&&n(5,l=new URL(`../images/full/${i.id}.jpg`,f))},[i,r,c,m,a,l,h,p,f]}class re extends q{constructor(e){super(),B(this,e,ae,ne,D,{photo:0,prevPhotoId:1,nextPhotoId:2,baseUrl:8})}}export{re as default};
