import{S as se,i as ae,s as ie,a as U,e as m,F as X,f as x,c as g,b as R,d as C,g as v,j,m as z,n as q,D as P,G as N,H as Y,k as _,I as J,r as oe,J as Z,K as re,E as $}from"./index.69988667.js";const B=document.createElement("a");document.body.appendChild(B);B.style.display="none";function ue(l,e){return new Promise(t=>{l.toBlob(i=>{if(i){const h=URL.createObjectURL(i);B.href=h,B.download=`${e}.jpg`,B.click(),URL.revokeObjectURL(h),t(i)}},"image/jpeg")})}const ce={s:1e3,m:2e3,l:3e3};function le(l){return ce[l]}function fe(l,e){return le(e)*(l/100)}function ne(l,{size:e,spacing:t},i){const o={items:[],w:0,h:0},u=l.map(a=>a.width/a.height),f=le(e),s=fe(t,e),p=u.map(a=>i?[f,Math.round(f/a)]:[Math.round(f*a),f]),w=p.map(([a,n])=>i?n:a).reduce((a,n)=>a+n,s*(l.length+1));i?(o.w=f+s*2,o.h=w):(o.w=w,o.h=f+s*2);let c=s;return l.forEach((a,n)=>{const r=p[n];i?(o.items.push({image:a,x:s,y:c,w:r[0],h:r[1]}),c+=r[1]+s):(o.items.push({image:a,x:c,y:s,w:r[0],h:r[1]}),c+=r[0]+s)}),o}function pe(l,e){return ne(l,e,!0)}function he(l,e){return ne(l,e,!1)}const de={horizontal:he,vertical:pe};function ee(l){let e,t,i,h="Add images",o,u,f,s,p,w="Small",c,a="Medium",n,r="Large",F,k,E,M="Horizontal",L,W="Vertical",A,y,D,O,V,d,I="Reset",S,Q;return{c(){e=m("div"),t=m("label"),i=m("div"),i.textContent=h,o=U(),u=m("input"),f=U(),s=m("select"),p=m("option"),p.textContent=w,c=m("option"),c.textContent=a,n=m("option"),n.textContent=r,F=U(),k=m("select"),E=m("option"),E.textContent=M,L=m("option"),L.textContent=W,A=U(),y=m("input"),D=U(),O=m("input"),V=U(),d=m("button"),d.textContent=I,this.h()},l(T){e=g(T,"DIV",{class:!0});var b=R(e);t=g(b,"LABEL",{class:!0});var H=R(t);i=g(H,"DIV",{class:!0,["data-svelte-h"]:!0}),P(i)!=="svelte-ecwxcw"&&(i.textContent=h),o=x(H),u=g(H,"INPUT",{type:!0,accept:!0,class:!0}),H.forEach(C),f=x(b),s=g(b,"SELECT",{});var G=R(s);p=g(G,"OPTION",{["data-svelte-h"]:!0}),P(p)!=="svelte-cqkaja"&&(p.textContent=w),c=g(G,"OPTION",{["data-svelte-h"]:!0}),P(c)!=="svelte-cdvn1s"&&(c.textContent=a),n=g(G,"OPTION",{["data-svelte-h"]:!0}),P(n)!=="svelte-1ezouf3"&&(n.textContent=r),G.forEach(C),F=x(b),k=g(b,"SELECT",{});var K=R(k);E=g(K,"OPTION",{["data-svelte-h"]:!0}),P(E)!=="svelte-1eqx6rq"&&(E.textContent=M),L=g(K,"OPTION",{["data-svelte-h"]:!0}),P(L)!=="svelte-ahrgri"&&(L.textContent=W),K.forEach(C),A=x(b),y=g(b,"INPUT",{type:!0,min:!0,max:!0,step:!0}),D=x(b),O=g(b,"INPUT",{type:!0}),V=x(b),d=g(b,"BUTTON",{class:!0,["data-svelte-h"]:!0}),P(d)!=="svelte-bt4pce"&&(d.textContent=I),b.forEach(C),this.h()},h(){v(i,"class","button svelte-5xbdg9"),v(u,"type","file"),u.multiple=!0,v(u,"accept","image/png, image/jpeg"),v(u,"class","svelte-5xbdg9"),v(t,"class","input svelte-5xbdg9"),p.__value="s",N(p,p.__value),c.__value="m",N(c,c.__value),n.__value="l",N(n,n.__value),l[3]===void 0&&Y(()=>l[16].call(s)),E.__value="horizontal",N(E,E.__value),L.__value="vertical",N(L,L.__value),l[2]===void 0&&Y(()=>l[17].call(k)),v(y,"type","range"),v(y,"min","0"),v(y,"max","10"),v(y,"step","1"),v(O,"type","color"),v(d,"class","button reset svelte-5xbdg9"),v(e,"class","panel svelte-5xbdg9")},m(T,b){j(T,e,b),_(e,t),_(t,i),_(t,o),_(t,u),_(e,f),_(e,s),_(s,p),_(s,c),_(s,n),J(s,l[3],!0),_(e,F),_(e,k),_(k,E),_(k,L),J(k,l[2],!0),_(e,A),_(e,y),N(y,l[4]),_(e,D),_(e,O),N(O,l[1]),_(e,V),_(e,d),S||(Q=[z(u,"change",l[10]),z(s,"change",l[16]),z(k,"change",l[17]),z(y,"change",l[18]),z(y,"input",l[18]),z(O,"input",l[19]),z(d,"click",l[11])],S=!0)},p(T,b){b&8&&J(s,T[3]),b&4&&J(k,T[2]),b&16&&N(y,T[4]),b&2&&N(O,T[1])},d(T){T&&C(e),S=!1,oe(Q)}}}function _e(l){let e,t,i="Add images",h,o,u,f;return{c(){e=m("label"),t=m("div"),t.textContent=i,h=U(),o=m("input"),this.h()},l(s){e=g(s,"LABEL",{class:!0});var p=R(e);t=g(p,"DIV",{class:!0,["data-svelte-h"]:!0}),P(t)!=="svelte-ecwxcw"&&(t.textContent=i),h=x(p),o=g(p,"INPUT",{type:!0,accept:!0,class:!0}),p.forEach(C),this.h()},h(){v(t,"class","button svelte-5xbdg9"),v(o,"type","file"),o.multiple=!0,v(o,"accept","image/png, image/jpeg"),v(o,"class","svelte-5xbdg9"),v(e,"class","input svelte-5xbdg9")},m(s,p){j(s,e,p),_(e,t),_(e,h),_(e,o),u||(f=z(o,"change",l[10]),u=!0)},p:q,d(s){s&&C(e),u=!1,f()}}}function ve(l){let e;return{c(){e=m("canvas"),this.h()},l(t){e=g(t,"CANVAS",{class:!0}),R(e).forEach(C),this.h()},h(){v(e,"class","canvas svelte-5xbdg9")},m(t,i){j(t,e,i),l[20](e)},p:q,d(t){t&&C(e),l[20](null)}}}function te(l){let e,t,i="Save",h,o;return{c(){e=m("div"),t=m("button"),t.textContent=i,this.h()},l(u){e=g(u,"DIV",{class:!0});var f=R(e);t=g(f,"BUTTON",{class:!0,["data-svelte-h"]:!0}),P(t)!=="svelte-1ktiavv"&&(t.textContent=i),f.forEach(C),this.h()},h(){v(t,"class","button svelte-5xbdg9"),v(e,"class","save svelte-5xbdg9")},m(u,f){j(u,e,f),_(e,t),h||(o=z(t,"click",l[9]),h=!0)},p:q,d(u){u&&C(e),h=!1,o()}}}function me(l){let e,t,i,h,o,u,f,s=l[0].length>0&&ee(l);function p(n,r){return n[0].length>0?ve:_e}let w=p(l),c=w(l),a=l[0].length>0&&te(l);return{c(){s&&s.c(),e=U(),t=m("div"),c.c(),h=U(),a&&a.c(),o=X(),this.h()},l(n){s&&s.l(n),e=x(n),t=g(n,"DIV",{class:!0});var r=R(t);c.l(r),r.forEach(C),h=x(n),a&&a.l(n),o=X(),this.h()},h(){v(t,"class",i="canvasWrapper "+(l[7]?"vertical":"horizontal")+" svelte-5xbdg9")},m(n,r){s&&s.m(n,r),j(n,e,r),j(n,t,r),c.m(t,null),l[21](t),j(n,h,r),a&&a.m(n,r),j(n,o,r),u||(f=z(window,"resize",l[8]),u=!0)},p(n,[r]){n[0].length>0?s?s.p(n,r):(s=ee(n),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),w===(w=p(n))&&c?c.p(n,r):(c.d(1),c=w(n),c&&(c.c(),c.m(t,null))),r&128&&i!==(i="canvasWrapper "+(n[7]?"vertical":"horizontal")+" svelte-5xbdg9")&&v(t,"class",i),n[0].length>0?a?a.p(n,r):(a=te(n),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},i:q,o:q,d(n){n&&(C(e),C(t),C(h),C(o)),s&&s.d(n),c.d(),l[21](null),a&&a.d(n),u=!1,f()}}}function ge(l,e,t){l.canvas.width=e.w,l.canvas.height=e.h,l.fillStyle=t,l.fillRect(0,0,e.w,e.h),e.items.forEach(({image:i,x:h,y:o,w:u,h:f},s)=>{l.drawImage(i,h,o,u,f)})}function be(l,e,t){let i,h,o,u=[],f=[],s="#FFFFFF",p="horizontal",w="m",c=3,a=null,n=null,r={w:0,h:0};function F(d){const I=d.getBoundingClientRect();t(13,r.w=I.width,r),t(13,r.h=I.height,r)}function k(){n&&F(n)}function E(d){d.preventDefault(),a&&ue(a,"collage")}function M(d){const I=d.target;I.files&&(t(12,u=u.concat(Array.from(I.files).map(S=>URL.createObjectURL(S)))),I.value="")}function L(){t(12,u=[])}function W(){w=Z(this),t(3,w)}function A(){p=Z(this),t(2,p)}function y(){c=re(this.value),t(4,c)}function D(){s=this.value,t(1,s)}function O(d){$[d?"unshift":"push"](()=>{a=d,t(5,a)})}function V(d){$[d?"unshift":"push"](()=>{n=d,t(6,n)})}return l.$$.update=()=>{l.$$.dirty&4096&&Promise.all(u.map(d=>new Promise(I=>{const S=new Image;S.onload=()=>{I(S)},S.src=d}))).then(d=>{t(0,f=d)}),l.$$.dirty&29&&t(14,i=de[p](f,{size:w,spacing:c})),l.$$.dirty&32&&t(15,h=a?.getContext("2d")),l.$$.dirty&49154&&h&&requestAnimationFrame(()=>{ge(h,i,s)}),l.$$.dirty&64&&n&&F(n),l.$$.dirty&24576&&t(7,o=i.w/i.h<r.w/r.h)},[f,s,p,w,c,a,n,o,k,E,M,L,u,r,i,h,W,A,y,D,O,V]}class we extends se{constructor(e){super(),ae(this,e,be,me,ie,{})}}export{we as default};
