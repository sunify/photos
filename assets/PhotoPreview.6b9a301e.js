import{S as z,i as B,s as H,e as v,c as I,D as L,g as m,j as R,m as w,n as k,d as y,r as W,E as X,a as C,b as Y,f as T,q as _,k as P,u as b,w as S,v as N,o as Q,z as V,A as F,B as J,C as O,y as Z}from"./index.afdf6035.js";/* empty css                        */const j=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,{window:$}=j;function ee(t){let e,n="Back",o,r;return{c(){e=v("a"),e.textContent=n,this.h()},l(a){e=I(a,"A",{href:!0,class:!0,["data-svelte-h"]:!0}),L(e)!=="svelte-1nn2gax"&&(e.textContent=n),this.h()},h(){m(e,"href","."),m(e,"class","back svelte-z80bok")},m(a,s){R(a,e,s),t[5](e),o||(r=[w($,"keyup",t[1]),w(e,"click",t[2])],o=!0)},p:k,i:k,o:k,d(a){a&&y(e),t[5](null),o=!1,W(r)}}}function D(t){window.history.back(),setTimeout(()=>{window.location=t},50)}function U(t){window.history.replaceState(null,"",`/photos/${t}`),window.location.reload()}function te(t,e,n){let{prevPhotoId:o=null}=e,{nextPhotoId:r=null}=e,a;function s(i){i.key==="Escape"&&D("."),i.key==="ArrowLeft"&&o&&U(o),i.key==="ArrowRight"&&r&&U(r)}function d(i){i.preventDefault(),D(a.href)}function f(i){X[i?"unshift":"push"](()=>{a=i,n(0,a)})}return t.$$set=i=>{"prevPhotoId"in i&&n(3,o=i.prevPhotoId),"nextPhotoId"in i&&n(4,r=i.nextPhotoId)},[a,s,d,o,r,f]}class ne extends z{constructor(e){super(),B(this,e,te,ee,H,{prevPhotoId:3,nextPhotoId:4})}}function oe(t,e){function n(r,a){return Math.round(Math.random()*(a-r))+r}const o=new Set;for(;o.size<e;)o.add(n(0,t.length));return[...o].map(r=>t[r])}function q(t,e,n){let o=0,r=n(t[0],e);for(let a=1;a<t.length;a+=1){const s=n(t[a],e);s<r&&(r=s,o=a)}return o}function ae(t,e,{distanceFn:n,centroidFn:o,initFn:r=oe}){const a=[];r(t,e).forEach(c=>{a.push({center:c,points:[]})});const d=c=>{const g=q(c,o(c),n);return c[g]},f=()=>{const c=a.map(g=>g.center);t.forEach(g=>{const p=q(c,g,n);a[p].points.push(g)})},i=()=>{a.forEach(c=>{c.center=d(c.points),c.points=[]})};f();for(let c=0;c<25;c+=1)i(),f();return a.map(c=>c.points)}function M(t){const e=parseInt(t.replace("#",""),16);return[e>>16&255,e>>8&255,e&255]}function re(t,e,n){return"#"+(16777216+(t<<16|e<<8|n<<0)).toString(16).slice(1)}function le(t,e){const[n,o,r]=M(t),[a,s,d]=M(e);return Math.sqrt(Math.pow(a-n,2)+Math.pow(s-o,2)+Math.pow(d-r,2))}function se(t,e){const n=[...new Set(t.flat())];if(n.length<=e)return t;const o=ae(n,e,{distanceFn:le,centroidFn:a=>{const[s,d,f]=a.reduce((i,c)=>M(c).map((g,p)=>g+i[p]),[0,0,0]).map(i=>Math.round(i/a.length));return re(s,d,f)}}),r={};return o.forEach(a=>{a.forEach(s=>{r[s]=a[0]})}),t.map(a=>a.map(s=>r[s]))}function ie(t,e,n){const o=t.getImageData(e,n,1,1);return"#"+o.data[0].toString(16).padStart(2,"0")+o.data[1].toString(16).padStart(2,"0")+o.data[2].toString(16).padStart(2,"0")}function ce(t){const e=[];for(let n=0;n<t.canvas.height;n+=1){const o=[];for(let r=0;r<t.canvas.width;r+=1)o.push(ie(t,r,n));e.push(o)}return e}function ue(t){const e=document.createElement("canvas"),n=e.getContext("2d");if(e.width=Math.round(50*(t.width/t.height)),e.height=50,!n)return;n.imageSmoothingQuality="high",n.imageSmoothingEnabled=!0,n.drawImage(t,0,0,e.width,e.height);let o=`
`;const r=[];let a=ce(n);a=se(a,54);for(let s=0;s<a.length;s+=2){for(let d=0;d<a[s].length;d+=1){const f=a[s][d],i=a[s+1][d];o+="%câ–„",r.push(`background-color: ${f};color: ${i};font-size: 15px;`)}o+=`
`}console.log(o,...r)}const{window:de}=j;function A(t){let e,n;return e=new ne({props:{prevPhotoId:t[1],nextPhotoId:t[2]}}),{c(){V(e.$$.fragment)},l(o){F(e.$$.fragment,o)},m(o,r){J(e,o,r),n=!0},p(o,r){const a={};r&2&&(a.prevPhotoId=o[1]),r&4&&(a.nextPhotoId=o[2]),e.$set(a)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){O(e,o)}}}function he(t){let e,n,o,r,a,s,d,f,i,c,g,p,l=!t[4]&&A(t);return{c(){e=v("div"),n=v("img"),a=C(),s=v("img"),f=C(),l&&l.c(),this.h()},l(u){e=I(u,"DIV",{class:!0});var h=Y(e);n=I(h,"IMG",{class:!0,src:!0,alt:!0}),a=T(h),s=I(h,"IMG",{src:!0,class:!0,alt:!0}),f=T(h),l&&l.l(h),h.forEach(y),this.h()},h(){m(n,"class","photo svelte-c3ihsa"),_(n.src,o=t[3]?t[5]:`data:image/png;base64,${t[0].data.placeholder}`)||m(n,"src",o),m(n,"alt",r=t[0].data.title),_(s.src,d="data:image/png;base64,"+t[0].data.placeholder)||m(s,"src",d),m(s,"class","placeholder svelte-c3ihsa"),m(s,"alt","placeholder"),m(e,"class",i="preview "+(t[3]?"loaded":"")+" "+(t[4]?"full":"")+" svelte-c3ihsa")},m(u,h){R(u,e,h),P(e,n),P(e,a),P(e,s),P(e,f),l&&l.m(e,null),c=!0,g||(p=[w(de,"keyup",t[7]),w(n,"click",t[6]),w(n,"keyup",fe)],g=!0)},p(u,[h]){(!c||h&41&&!_(n.src,o=u[3]?u[5]:`data:image/png;base64,${u[0].data.placeholder}`))&&m(n,"src",o),(!c||h&1&&r!==(r=u[0].data.title))&&m(n,"alt",r),(!c||h&1&&!_(s.src,d="data:image/png;base64,"+u[0].data.placeholder))&&m(s,"src",d),u[4]?l&&(Z(),S(l,1,1,()=>{l=null}),N()):l?(l.p(u,h),h&16&&b(l,1)):(l=A(u),l.c(),b(l,1),l.m(e,null)),(!c||h&24&&i!==(i="preview "+(u[3]?"loaded":"")+" "+(u[4]?"full":"")+" svelte-c3ihsa"))&&m(e,"class",i)},i(u){c||(b(l),c=!0)},o(u){S(l),c=!1},d(u){u&&y(e),l&&l.d(),g=!1,W(p)}}}function fe(){}function ge(t){return new Promise(e=>{setTimeout(e,t)})}function me(t,e,n){let o,{photo:r}=e,{prevPhotoId:a=null}=e,{nextPhotoId:s=null}=e,{baseUrl:d}=e,f=!1,i=!1;function c(l){if(!i){const{pageX:u,pageY:h}=l;setTimeout(()=>{const x=document.documentElement.scrollWidth-window.innerWidth,G=document.documentElement.scrollHeight-window.innerHeight,E=K=>Math.round(K*100)/100;window.scrollTo(x*E(u/window.innerWidth),G*E(h/window.innerHeight))})}n(4,i=!i)}function g(){return new Promise(l=>{const u=new Image;u.onload=()=>{l(!0),ue(u)},u.src=o.href})}function p(l){l.key==="Escape"&&n(4,i=!1)}return Q(()=>{Promise.all([g(),ge(400)]).then(()=>{n(3,f=!0)})}),t.$$set=l=>{"photo"in l&&n(0,r=l.photo),"prevPhotoId"in l&&n(1,a=l.prevPhotoId),"nextPhotoId"in l&&n(2,s=l.nextPhotoId),"baseUrl"in l&&n(8,d=l.baseUrl)},t.$$.update=()=>{t.$$.dirty&257&&n(5,o=new URL(`../images/full/${r.id}.jpg`,d))},[r,a,s,f,i,o,c,p,d]}class _e extends z{constructor(e){super(),B(this,e,me,he,H,{photo:0,prevPhotoId:1,nextPhotoId:2,baseUrl:8})}}export{_e as default};
