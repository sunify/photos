import{S as B,i as D,s as H,e as P,c as I,q as X,g as f,j as W,m as w,n as b,d as y,r as j,u as Y,a as E,b as L,f as S,v as _,k as v,w as k,x as C,y as N,o as R,z as U,A as V,B as F,C as J,D as O}from"./index.669fa2c9.js";/* empty css                        */const z=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,{window:Q}=z;function Z(t){let e,o="Back",n,a;return{c(){e=P("a"),e.textContent=o,this.h()},l(i){e=I(i,"A",{href:!0,class:!0,["data-svelte-h"]:!0}),X(e)!=="svelte-1nn2gax"&&(e.textContent=o),this.h()},h(){f(e,"href","."),f(e,"class","back svelte-z80bok")},m(i,c){W(i,e,c),t[5](e),n||(a=[w(Q,"keyup",t[1]),w(e,"click",t[2])],n=!0)},p:b,i:b,o:b,d(i){i&&y(e),t[5](null),n=!1,j(a)}}}function A(t){window.history.back(),setTimeout(()=>{window.location=t},50)}function M(t){window.history.replaceState(null,"",`./${t}`),window.location.reload()}function x(t,e,o){let{prevPhotoId:n=null}=e,{nextPhotoId:a=null}=e,i;function c(s){s.key==="Escape"&&A("."),s.key==="ArrowLeft"&&n&&M(n),s.key==="ArrowRight"&&a&&M(a)}function p(s){s.preventDefault(),A(i.href)}function h(s){Y[s?"unshift":"push"](()=>{i=s,o(0,i)})}return t.$$set=s=>{"prevPhotoId"in s&&o(3,n=s.prevPhotoId),"nextPhotoId"in s&&o(4,a=s.nextPhotoId)},[i,c,p,n,a,h]}class $ extends B{constructor(e){super(),D(this,e,x,Z,H,{prevPhotoId:3,nextPhotoId:4})}}const{window:ee}=z;function q(t){let e,o;return e=new $({props:{prevPhotoId:t[1],nextPhotoId:t[2]}}),{c(){U(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,a){F(e,n,a),o=!0},p(n,a){const i={};a&2&&(i.prevPhotoId=n[1]),a&4&&(i.nextPhotoId=n[2]),e.$set(i)},i(n){o||(k(e.$$.fragment,n),o=!0)},o(n){C(e.$$.fragment,n),o=!1},d(n){J(e,n)}}}function te(t){let e,o,n,a,i,c,p,h,s,m,g,d,l=!t[4]&&q(t);return{c(){e=P("div"),o=P("img"),i=E(),c=P("img"),h=E(),l&&l.c(),this.h()},l(r){e=I(r,"DIV",{class:!0});var u=L(e);o=I(u,"IMG",{class:!0,src:!0,"data-src":!0,alt:!0}),i=S(u),c=I(u,"IMG",{src:!0,class:!0,alt:!0}),h=S(u),l&&l.l(u),u.forEach(y),this.h()},h(){f(o,"class","photo svelte-1142rt3"),_(o.src,n=t[3]?t[5]:`data:image/png;base64,${t[0].data.placeholder}`)||f(o,"src",n),f(o,"data-src",""),f(o,"alt",a=t[0].data.title),_(c.src,p="data:image/png;base64,"+t[0].data.placeholder)||f(c,"src",p),f(c,"class","placeholder svelte-1142rt3"),f(c,"alt","placeholder"),f(e,"class",s="preview "+(t[3]?"loaded":"")+" "+(t[4]?"full":"")+" svelte-1142rt3")},m(r,u){W(r,e,u),v(e,o),v(e,i),v(e,c),v(e,h),l&&l.m(e,null),m=!0,g||(d=[w(ee,"keyup",t[7]),w(o,"click",t[6]),w(o,"keyup",oe)],g=!0)},p(r,[u]){(!m||u&41&&!_(o.src,n=r[3]?r[5]:`data:image/png;base64,${r[0].data.placeholder}`))&&f(o,"src",n),(!m||u&1&&a!==(a=r[0].data.title))&&f(o,"alt",a),(!m||u&1&&!_(c.src,p="data:image/png;base64,"+r[0].data.placeholder))&&f(c,"src",p),r[4]?l&&(O(),C(l,1,1,()=>{l=null}),N()):l?(l.p(r,u),u&16&&k(l,1)):(l=q(r),l.c(),k(l,1),l.m(e,null)),(!m||u&24&&s!==(s="preview "+(r[3]?"loaded":"")+" "+(r[4]?"full":"")+" svelte-1142rt3"))&&f(e,"class",s)},i(r){m||(k(l),m=!0)},o(r){C(l),m=!1},d(r){r&&y(e),l&&l.d(),g=!1,j(d)}}}function oe(){}function ne(t){return new Promise(e=>{setTimeout(e,t)})}function le(t,e,o){let n,{photo:a}=e,{prevPhotoId:i=null}=e,{nextPhotoId:c=null}=e,p=!1,h=!1;function s(d){if(!h){const{pageX:l,pageY:r}=d;setTimeout(()=>{const u=document.documentElement.scrollWidth-window.innerWidth,G=document.documentElement.scrollHeight-window.innerHeight,T=K=>Math.round(K*100)/100;window.scrollTo(u*T(l/window.innerWidth),G*T(r/window.innerHeight))})}o(4,h=!h)}function m(){return new Promise(d=>{const l=new Image;l.onload=()=>{d(!0)},l.src=n})}function g(d){d.key==="Escape"&&o(4,h=!1)}return R(()=>{Promise.all([m(),ne(400)]).then(()=>{o(3,p=!0)})}),t.$$set=d=>{"photo"in d&&o(0,a=d.photo),"prevPhotoId"in d&&o(1,i=d.prevPhotoId),"nextPhotoId"in d&&o(2,c=d.nextPhotoId)},t.$$.update=()=>{t.$$.dirty&1&&o(5,n=`images/full/${a.id}.jpg`)},[a,i,c,p,h,n,s,g]}class se extends B{constructor(e){super(),D(this,e,le,te,H,{photo:0,prevPhotoId:1,nextPhotoId:2})}}export{se as default};
