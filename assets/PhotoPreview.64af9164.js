import{S as z,i as x,s as B,e as I,c as P,q as R,g,j as H,m as w,n as k,d as y,r as W,u as X,a as E,b as Y,f as T,v as _,k as v,w as b,x as S,y as N,o as Q,z as V,A as F,B as J,C as O,D as Z}from"./index.669fa2c9.js";/* empty css                        */const j=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,{window:$}=j;function ee(t){let e,n="Back",o,l;return{c(){e=I("a"),e.textContent=n,this.h()},l(a){e=P(a,"A",{href:!0,class:!0,["data-svelte-h"]:!0}),R(e)!=="svelte-1nn2gax"&&(e.textContent=n),this.h()},h(){g(e,"href","."),g(e,"class","back svelte-z80bok")},m(a,s){H(a,e,s),t[5](e),o||(l=[w($,"keyup",t[1]),w(e,"click",t[2])],o=!0)},p:k,i:k,o:k,d(a){a&&y(e),t[5](null),o=!1,W(l)}}}function D(t){window.history.back(),setTimeout(()=>{window.location=t},50)}function U(t){window.history.replaceState(null,"",`/photos/${t}`),window.location.reload()}function te(t,e,n){let{prevPhotoId:o=null}=e,{nextPhotoId:l=null}=e,a;function s(r){r.key==="Escape"&&D("."),r.key==="ArrowLeft"&&o&&U(o),r.key==="ArrowRight"&&l&&U(l)}function u(r){r.preventDefault(),D(a.href)}function f(r){X[r?"unshift":"push"](()=>{a=r,n(0,a)})}return t.$$set=r=>{"prevPhotoId"in r&&n(3,o=r.prevPhotoId),"nextPhotoId"in r&&n(4,l=r.nextPhotoId)},[a,s,u,o,l,f]}class ne extends z{constructor(e){super(),x(this,e,te,ee,B,{prevPhotoId:3,nextPhotoId:4})}}function oe(t,e){return Math.round(Math.random()*(e-t))+t}function q(t,e,n){let o=0,l=n(t[0],e);for(let a=1;a<t.length;a+=1){const s=n(t[a],e);s<l&&(l=s,o=a)}return o}function ae(t,e,{distanceFn:n,centroidFn:o}){const l=[],a=new Set;for(;a.size<e;)a.add(oe(0,t.length));a.forEach(r=>{l.push({center:t[r],points:[]})});const s=r=>{const d=q(r,o(r),n);return r[d]},u=()=>{const r=l.map(d=>d.center);t.forEach(d=>{const m=q(r,d,n);l[m].points.push(d)})},f=()=>{l.forEach(r=>{r.center=s(r.points),r.points=[]})};u();for(let r=0;r<25;r+=1)f(),u();return l.map(r=>r.points)}function M(t){const e=parseInt(t.replace("#",""),16);return[e>>16&255,e>>8&255,e&255]}function re(t,e,n){return"#"+(16777216+(t<<16|e<<8|n<<0)).toString(16).slice(1)}function le(t,e){const[n,o,l]=M(t),[a,s,u]=M(e);return Math.sqrt(Math.pow(a-n,2)+Math.pow(s-o,2)+Math.pow(u-l,2))}function se(t,e){const n=[...new Set(t.flat())];if(n.length<=e)return t;const o=ae(n,e,{distanceFn:le,centroidFn:a=>{const[s,u,f]=a.reduce((r,d)=>M(d).map((m,p)=>m+r[p]),[0,0,0]).map(r=>Math.round(r/a.length));return re(s,u,f)}}),l={};return o.forEach(a=>{a.forEach(s=>{l[s]=a[0]})}),t.map(a=>a.map(s=>l[s]))}function ie(t,e,n){const o=t.getImageData(e,n,1,1);return"#"+o.data[0].toString(16).padStart(2,"0")+o.data[1].toString(16).padStart(2,"0")+o.data[2].toString(16).padStart(2,"0")}function ce(t){const e=[];for(let n=0;n<t.canvas.height;n+=1){const o=[];for(let l=0;l<t.canvas.width;l+=1)o.push(ie(t,l,n));e.push(o)}return e}function ue(t){const e=document.createElement("canvas"),n=e.getContext("2d");if(e.width=Math.round(50*(t.width/t.height)),e.height=50,!n)return;n.imageSmoothingQuality="high",n.imageSmoothingEnabled=!0,n.drawImage(t,0,0,e.width,e.height);let o=`
`;const l=[];let a=ce(n);a=se(a,54);for(let s=0;s<a.length;s+=2){for(let u=0;u<a[s].length;u+=1){const f=a[s][u],r=a[s+1][u];o+="%câ–„",l.push(`background-color: ${f};color: ${r};font-size: 15px;`)}o+=`
`}console.log(o,...l)}const{window:de}=j;function A(t){let e,n;return e=new ne({props:{prevPhotoId:t[1],nextPhotoId:t[2]}}),{c(){V(e.$$.fragment)},l(o){F(e.$$.fragment,o)},m(o,l){J(e,o,l),n=!0},p(o,l){const a={};l&2&&(a.prevPhotoId=o[1]),l&4&&(a.nextPhotoId=o[2]),e.$set(a)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),n=!1},d(o){O(e,o)}}}function he(t){let e,n,o,l,a,s,u,f,r,d,m,p,i=!t[4]&&A(t);return{c(){e=I("div"),n=I("img"),a=E(),s=I("img"),f=E(),i&&i.c(),this.h()},l(c){e=P(c,"DIV",{class:!0});var h=Y(e);n=P(h,"IMG",{class:!0,src:!0,alt:!0}),a=T(h),s=P(h,"IMG",{src:!0,class:!0,alt:!0}),f=T(h),i&&i.l(h),h.forEach(y),this.h()},h(){g(n,"class","photo svelte-c3ihsa"),_(n.src,o=t[3]?t[5]:`data:image/png;base64,${t[0].data.placeholder}`)||g(n,"src",o),g(n,"alt",l=t[0].data.title),_(s.src,u="data:image/png;base64,"+t[0].data.placeholder)||g(s,"src",u),g(s,"class","placeholder svelte-c3ihsa"),g(s,"alt","placeholder"),g(e,"class",r="preview "+(t[3]?"loaded":"")+" "+(t[4]?"full":"")+" svelte-c3ihsa")},m(c,h){H(c,e,h),v(e,n),v(e,a),v(e,s),v(e,f),i&&i.m(e,null),d=!0,m||(p=[w(de,"keyup",t[7]),w(n,"click",t[6]),w(n,"keyup",fe)],m=!0)},p(c,[h]){(!d||h&41&&!_(n.src,o=c[3]?c[5]:`data:image/png;base64,${c[0].data.placeholder}`))&&g(n,"src",o),(!d||h&1&&l!==(l=c[0].data.title))&&g(n,"alt",l),(!d||h&1&&!_(s.src,u="data:image/png;base64,"+c[0].data.placeholder))&&g(s,"src",u),c[4]?i&&(Z(),S(i,1,1,()=>{i=null}),N()):i?(i.p(c,h),h&16&&b(i,1)):(i=A(c),i.c(),b(i,1),i.m(e,null)),(!d||h&24&&r!==(r="preview "+(c[3]?"loaded":"")+" "+(c[4]?"full":"")+" svelte-c3ihsa"))&&g(e,"class",r)},i(c){d||(b(i),d=!0)},o(c){S(i),d=!1},d(c){c&&y(e),i&&i.d(),m=!1,W(p)}}}function fe(){}function ge(t){return new Promise(e=>{setTimeout(e,t)})}function me(t,e,n){let o,{photo:l}=e,{prevPhotoId:a=null}=e,{nextPhotoId:s=null}=e,{baseUrl:u}=e,f=!1,r=!1;function d(i){if(!r){const{pageX:c,pageY:h}=i;setTimeout(()=>{const G=document.documentElement.scrollWidth-window.innerWidth,K=document.documentElement.scrollHeight-window.innerHeight,C=L=>Math.round(L*100)/100;window.scrollTo(G*C(c/window.innerWidth),K*C(h/window.innerHeight))})}n(4,r=!r)}function m(){return new Promise(i=>{const c=new Image;c.onload=()=>{i(!0),ue(c)},c.src=o.href})}function p(i){i.key==="Escape"&&n(4,r=!1)}return Q(()=>{Promise.all([m(),ge(400)]).then(()=>{n(3,f=!0)})}),t.$$set=i=>{"photo"in i&&n(0,l=i.photo),"prevPhotoId"in i&&n(1,a=i.prevPhotoId),"nextPhotoId"in i&&n(2,s=i.nextPhotoId),"baseUrl"in i&&n(8,u=i.baseUrl)},t.$$.update=()=>{t.$$.dirty&257&&n(5,o=new URL(`../images/full/${l.id}.jpg`,u))},[l,a,s,f,r,o,d,p,u]}class _e extends z{constructor(e){super(),x(this,e,me,he,B,{photo:0,prevPhotoId:1,nextPhotoId:2,baseUrl:8})}}export{_e as default};
